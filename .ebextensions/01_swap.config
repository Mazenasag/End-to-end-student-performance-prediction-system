commands:
  01_create_swap:
    command: |
      # Check if swap already exists
      if [ ! -f /var/swapfile ]; then
        # Create a 2GB swap file
        dd if=/dev/zero of=/var/swapfile bs=1M count=2048
        chmod 600 /var/swapfile
        mkswap /var/swapfile
        swapon /var/swapfile
        echo "/var/swapfile none swap defaults 0 0" >> /etc/fstab
      fi
    ignoreErrors: false